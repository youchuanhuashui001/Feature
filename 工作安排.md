---

kanban-plugin: board

---

## 待办

- [ ] Virgo_MPW I2C eCos 当 slave 不应答时，write 接口不返回出错，read 接口会返回出错
- [ ] Virgo_NRE 去掉FIFO 同步完成标记位
	https://git.nationalchip.com/redmine/issues/372614
- [ ] Virgo Watchdog Linux4.19 修改频率
- [x] Virgo_MPW gpio 时钟，找周龙确认
	- 198Mhz
	- gxloader 需要修改频率
		- 不需要改频率，这个频率是 PWM 用的，不用管
- [ ] `GoXceed 5.0.0 GX_API` 接口将由 `Gx_HAL` 接口替代：
	https://git.nationalchip.com/redmine/projects/goxceed/wiki/GxHAL_%E7%BC%96%E7%A8%8B%E8%A7%84%E8%8C%83
- [ ] Virgo_NRE
	- SPINand flash 讨论是否需要备份，由于其自带 ecc，如果ecc无法纠错失败后就启动失败
	- 要求 flash 确保 block0 是好块
- [ ] I2C eCos 添加测试代码
- [ ] Virgo_NRE ROM flash 驱动通过 magic  aa55 这种方式，先双线读，再单线读，就可以同时支持4线flash和8线flash
	- [ ] [设备树支持 SPINor、SPINand]
- [ ] [设备树支持 SPINor、SPINand]
	- virgo_nre


## GoXceed



## Virgo_MPW

- [ ] [[Virgo_MPW 芯片测试进度]]
- [x] 合并补丁：
	- gxloader：gen_spi、watchdog、rtc
	- gxtest：time
- [ ] Virgo_MPW GXAPI I2C 接口参考 i2c-tools 获取 i2c 控制器数量 
	[[Virgo_MPW  BBT I2C 测试开发]]
- [ ] Virgo_MPW GPIO linux 驱动支持
	- linux4.9 已完成
	- linux4.19 需要熟悉 gpio 框架
- [ ] Virgo_MPW Flash_SPI 模块验证
	- 8线 nor flash
		- 需要用 d4 的板子
		- gxloader 测试
		- linux 测试
	- 多 CS
		- 也用 d4 的板子测吧
	- spinand
		- 等 uart 测试完后再换
- [x] [[Virgo_MPW UART 模块验证]]
- [x] [[AXI-DMA Linux4.19]]
- [x] Virgo_MPW A55 Linux4.19 I2C 驱动支持
	- dtb 时钟改成99MHz
	- 已完成
- [ ] Virgo_MPW PWM-regulator:
	- gpio 使用新的驱动的时候，做一个复用的代码
	- 将复用通过 dts 描述，有 pinctl成 gpio，然后 gpio 对应的 pwm
- [ ] Virgo_MPW 所有外设模块低功耗测试
	- [ ] GPIO 功耗测试时，需要把内部上拉全部配成 0


## 已完成

**完成**
- [x] 顺丰快递在前台，应该是kh flash


## 待整理

- [ ] Linux MTD 分区：
	- nor flash 擦除大小为 64KB
	- 分区时大小和地址都要 64KB 对齐，但事业部经常会只分 4KB，或 512B，这种情况下擦除分区会影响相邻分区。
	- linux mtd 要求分区大小是  erase_size，在 64KB 擦除时，只分4KB 的分区就会是 Read only，但要确保 rootfs 分区是 64KB 对齐；
	
	- 如果linux 打开了 4K 擦除的选项，那么 mtd 分区就可以 以 4K 对齐了
- [ ] DW_I2C tx 时 msg 只需要组建一个，rx 时 msg 需要组建两个
	- Linux I2C 驱动中对于 TX，老的驱动 4.9 使用两个 msg，但是 DW_I2C 驱动会在发完第一个 msg 之后，发第二个 msg 之前发一个 restart 信号。这样的话可能某些外设就会不通。
		- 因此修改了 i2c 原始驱动 https://git.nationalchip.com/gerrit/#/c/43412/
	- Linux4.19 已经在 gx_layer 将 TX 时的 msg 改成了一个，要发的数据
		- 因此不需要修改 i2c 原始驱动 https://git.nationalchip.com/gerrit/#/c/122907/2
	- 查看 linux 中的 i2c device driver，tx 时均使用 1 个 msg，rx 时均使用 2 个 msg


## Virgo_NRE



***

## 归档

- [x] 2025-07-09-星期三 16:51 [[GoXceed v3.0.1 支持 Nor Flash KH25L3233F、KH25L6433F]]

%% kanban:settings
```
{"kanban-plugin":"board","list-collapse":[false,true,false,true,true,true],"hide-card-count":true,"move-dates":true,"archive-with-date":true,"full-list-lane-width":false,"tag-colors":[]}
```
%%