
# 阅读手册

- Jedec ID：
	- `0x806513`  -- P25Q40SH
	- `0x856014`  -- P25Q80SH
- otp ：
	- `3*512Byte` `0x1000 0x1000`
	- `3*512Byte 0x1000 0x1000`
- uid ：
	- `0x4B + 4 dummy + 128b(16Byte)`
	- `0x4B + 4 dummy + 128b(16Byte)`
- 状态寄存器操作方式：
	- 四线使能：`模式0 0x31 写 SR1` `模式1 0x01 写 SR0、SR1`
	- 写保护：`0x05 读 SR0，0x35 读 SR1`
	- `0x05` 读 SR0、0x35 读 SR1
	- `0x01` 写 SR0/SR0+SR1、0x31 写 SR1

# 修改代码




# 测试用例 
- 4K Sector 擦除：
	- 1M：ok
	- 512K:ok
- 单线读写擦：
	- 1M：ok
	- 512K:ok
- 双线读写擦：
	- 1M：ok
	- 512K：ok
- 四线读写擦：
	- 1M: 2080 次 ok
	- 512K: ok
- UID：
	- 1M：ok
	- 512K:ok
- OTP：
	- 1M:ok
	- 512K:ok
- WP：
	- 1M:ok
	- 512K:ok
- 单页多次写：
	- 1M:error
	- 512K:error
- 掉电测试 ：

```
* 测试项与测试结果：
|测试项|P25Q80SH|P25Q40SH|
|单倍速读写擦测试|ok|ok|
|双倍速读写擦测试|ok||
|四倍速读写擦测试|ok|ok|
|写保护测试|ok|ok|
|otp测试|ok|ok|
|uid|ok|ok|
|单页多次写测试|error|error|
|300次掉电测试|||


* develop 分支补丁：{{patch()}}
```

# 手册上传至云盘 


# 其它 


# Bug1：block erase 擦除包含写保护区域时，不会做擦除操作
咨询一下，目前测试 P25Q80SH/P25Q40SH 写保护功能时遇到一个问题，希望帮忙分析下：
1. flash 配置写保护区域为从 0 地址开始的 16KB/32KB
2. 用 64KB 擦除的指令(0xD8) 擦除整片 flash，发现第一个 block 中非保护的区域依然有数据，未被擦掉；
3. 用 4KB 擦除的指令 (0x20) 不会有上面的问题



# Bug2：依然存在单页多次写问题
- 不能使用文件系统