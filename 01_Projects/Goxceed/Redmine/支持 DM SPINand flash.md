
#doing 

- 4G 读到的 ID 是：0x21 a1 00 00; 0x21 a1 00 00 
	- 0xa1 21
- 2G 读到的 ID 是：0x21 a1 00 00; 0x21 a1 00 00
- 1G 读到的 ID 是：0xef aa 21 00; 0xef aa 21 00

- 寄过来的样片不包含容量信息，只读到的MID和DID，后续重新邮寄新样片
	- 2025-09-02


# 1G
- ID：0x010fa1

## 问题

### 50MHz，双线模式下，会卡死
- 换到 297/32 

### .boot 不正常，时不时的卡死
- 换到 297/128 测试，

- 读写擦测试完之后，每次都有很多的坏块
	- 擦除之后就没有坏块了

- 2M 多的频率，烧写：
	- 卡住

- 换块板子测试吧
	- canopus 6631SH1D
		- 烧进去之后，起不来，再烧一遍 flash 的 block0、block1 都是坏块
		- 感觉像是操作了哪个 block，哪个 block 就是坏块
			-
		- 烧0地址，但是实际擦除了 0x20000地址，然后不重启，oobread 读 0 地址，卡死
		- dump 也全都是 0xff
	- **gdb 加载的方式测试不会出错**，但是如果烧录或者直接烧一个 .boot 的话就很容易卡死
		- 直接烧一个 .boot，卡死的时候 gdb 连上去看看死在哪
			- 死在读状态寄存器 busy
		- 修改spi的逻辑，tx的时候用tx_mask
		- 也还是有问题
			- 都是死在读状态寄存器 busy


### 读写完之后，可能对应地址的 oob 区域就不是 0xff
- 读写擦操作完后，烧个 .boot，起来读对应的区域




- 驱动能力？
- 换板子？
	- 1G 的样片：
		- 读写擦过的地址，都会变成坏块
			- 可能是不能关闭 ecc，现有的驱动中会在 create_bbt 的时候关闭 ecc 再读坏块标记(oob_region)
- 老的样片？
	- 可以，4G 的样片
		- 烧写正常，读写擦几次会出错
	- 2G 的样片
		- 可以烧写，但是起不来
		- 烧个.boot，进行读写擦测试，
		- 很不稳定

 @大乔Coffee  @剩者为王 乔总，钟总，咨询下新寄来的三款样片的相关信息：
 1. oob 大小是多少？oob 中 Spare0 的 Bad Block Marker 区域，用户可以使用吗？
 2. ecc 纠错能力是多少位？
 3. 已成功写入数据到 flash 后，可以在关闭ecc的情况下读取oob区域吗？
 4. 手册描述有 8 个 otp page，otp 的排布是怎样的？如何进入和退出 otp 区域？
 5. uid 如何获取？



乔总、钟总好，咨询一下关于新寄来的三款样片的几个信息：

1. OOB 区域的大小是多少？其中的 Spare0 部分用作 Bad Block Marker 的区域，用户是否可以使用？OOB 排布中是否只有 User Data I 可用？

2. ECC 纠错能力具体是多少位？

3. 如果已经成功将数据写入 Flash，是否可以在关闭 ECC 的情况下读取 OOB 区域？

4. 手册中提到有 8 个 OTP Page，请问 OTP 的具体排布方式是怎样的？如何进入和退出 OTP 区域？

5. UID 应当如何获取？

### 问题1：读 flash 状态寄存器一直卡死在 busy 中
- 烧录或者灌.boot测试，很大概率卡死在 busy
- gdb 连上去死在 busy 的概率比较小

### 问题2：读写完某块区域的main空间后，下一次操作发现 oob 区域被破坏了
- 读写擦测试，重烧.boot，操作过的地方都变成了坏块


- [x] 使用相同的硬件板，相同的软件，在 GD5F1GQ5UEYIG 上测试不会有以上的两个问题