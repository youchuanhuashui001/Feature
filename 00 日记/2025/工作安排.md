- [x] cursor
	- [x] [[02 学习/cursor/cursorrules/cursorrules|cursorrules]]
	- [x] [[agent]]
- [ ] virgo
	- [x] 外设对接
	- [x] rom spinor 驱动优化，用双倍速。spinand 驱动整理
		- [x] rom、stage1 spinand 驱动需要修改代码，避免从 0 地址读写数据
			- [x] 这里根本不存在这个问题，理解错了需求
	- [x] flash spi 要加 ddr 模式 [completion:: 2025-05-06]
	- [x] Virgo Flash SPI SPI_CTRLR0 在普通模式下会起作用，在测试时发现用新的 virgo_nre bit 测试，出现 Receive Over Flow，读不到 Flash ID。原因是读 id 读错了，需要修改 linux 中的 spi 驱动，在普通模式下需要配置 `SPI_CTRLR0` 为 0。 [completion:: 2025-04-27]
	- [x] stage1 和 rom 中的 spinand 驱动，需要解决编译报错的问题，使用变量的方式来修改 [completion:: 2025-05-06]
	- [ ] 小组会议讨论：
		- [ ] spinand 是否不需要备份？spinand 都自带 ecc，对于多备份是不是没什么必要？如果数据跳变太多了，纠正不了就让客户换 flash 好了。
	- [ ] 了解 axi 总线对于读请求、写请求，地址是否递增来整成一个 burst 传输的相关内容
	- [ ] i2c gx_i2c_async_tx 中的接口，对于 align_buf 需要按照 dcache_line 对齐，从 ai 移植过来的代码由于 apus cache line 为 32，所以直接写成了 32，需要改成 dcache_line_size
	- [ ] rtc 代码里面是单次的闹钟，但是实际测试好像是周期性的，需要确认
- [ ] sagitta
	- [x] 给 dma 用的 buffer 需要 aligned cache_line，否则会出现 dma buffer 和其它数据共用同一个 cache line 的问题
	- [x] 做 dma 操作之前会先将 dma buffer clean & invalid 到内存，但是和它共用一条 cache line 的后面的代码会访问这个 cache line，导致把这里 dma buffer 又读到了 cache；等到 dma 操作完成后，cache line 的数据和内存的数据 (dma 搬过去的数据) 又不一样了；如果此时 invalid 就会丢失栈的其它部分，因为共用一条 cache line 的后面的代码会用这里来存东西，可能会被破坏，导致跑飞
	- [x] iodma 评审
		- [x] 测试用例增加对接 ws2812 的功能测试
		- [x] 增加输出带死区的 pwm 功能
		- [x] 需要重新上传测试用例结果 [completion:: 2025-04-25]
		- [ ] iodma 驱动轮询和中断分开
	- [x] ir 引脚复用的补丁上传 [completion:: 2025-04-27]
	- [x] 对接 ir
	- [x] 内封 flash，会封 8Mbit 的 P25Q80SU，这是宽电压的 flash，要确认下驱动是否支持，还要看下 bbt 是不是也用这款，如果用的话也要看看代码 [completion:: 2025-05-14]
		- [x] 实际会用这一款的低压 1.8 版本，这款宽压的也有可能用到，bbt 也有可能会用到 [completion:: 2025-05-14]
			- [x] 目前 bbt 程序还没开始写，所以先不管 [completion:: 2025-05-14]
		- [x] 需要在 fpga 上跑一下，并且 bbt 程序看看也要支持这款 [completion:: 2025-05-14]
		- [x] 确认更新完支持后是否需要更新 bootx [completion:: 2025-05-14]
			- [x] 老的 P25Q80L 已支持，所以不用更新 bootx [completion:: 2025-05-14]
		- [x] 还有一点比较奇怪，这款 flash 默认是支持的，但是为什么翔哥那边说跑不起来？
			- [x] 由于硬件电源转换芯片焊接问题导致的，硬件重新焊接后没问题
- [ ] scpu stage1 驱动有问题，读的时候默认把 dmacr 也就是 r 的 dma 打开了
	- [ ] canopus stage1 使用 scpu 的 spl_spinor. c  通了：[123858](https://git.nationalchip.com/gerrit/123858 "Reload the change (Shortcut: R)")
	- [ ] virgo mpw stage1 使用 scpu 的 spl_spinor. c 通了：[123771](https://git.nationalchip.com/gerrit/123771 "Reload the change (Shortcut: R)")

